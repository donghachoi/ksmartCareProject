<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default}">

<th:block layout:fragment="customTitle">
	<title>index</title>
<!-- Bootstrap -->
       <link rel="stylesheet" href="assets/lib/bootstrap/css/bootstrap.css">
       
       <!-- Font Awesome -->
       <link rel="stylesheet" href="assets/lib/font-awesome/css/font-awesome.css">
       
       <!-- Metis core stylesheet -->
       <link rel="stylesheet" href="assets/css/main.css">
       
       <!-- metisMenu stylesheet -->
       <link rel="stylesheet" href="assets/lib/metismenu/metisMenu.css">
       
       <!-- onoffcanvas stylesheet -->
       <link rel="stylesheet" href="assets/lib/onoffcanvas/onoffcanvas.css">
       
       <!-- animate.css stylesheet -->
       <link rel="stylesheet" href="assets/lib/animate.css/animate.css">
      
       <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.12/css/dataTables.bootstrap.min.css">

       <script>
           less = {
               env: "development",
               relativeUrls: false,
               rootpath: "/assets/"
           };
       </script>
       <link rel="stylesheet" href="/assets/css/style-switcher.css">
       <link rel="stylesheet/less" type="text/css" href="/assets/less/theme.less">
       <script src="https://cdnjs.cloudflare.com/ajax/libs/less.js/2.7.1/less.js"></script>
</th:block>
<th:block layout:fragment="customContents">
	<body class="  ">
		<div class="bg-dark dk" id="wrap">
			<div id="top">
				<header class="head">
					<div class="main-bar">
						<h3><i class="fa fa-table"></i>&nbsp;수가 리스트 </h3>
					</div>
                 	<!-- /.main-bar -->
            	</header>
            	<!-- /.head -->
			</div>
   			 <!-- /#top -->
		</div>
		<!-- /#wrap -->
		<!-- 직원리스트 테이블 Start -->
<div id="content">
	<div class="outer">
		<div class="inner bg-light lter">
			<div class = "row">
				<div class="box">
					<div class="col-lg-12 ui-sortable">
						<div class="box ui-sortable-handle"
							style="position: relative; left: 0px; right: 0px; top: 0px; font-size: 25px;">
							
							<div id="collapse4" class="body" >
								<div class="row">
								<div role="tabpanel">
									<!-- Nav tabs -->
									<ul class="nav nav-tabs" role="tablist">
									  <li role="presentation" class="active">
									  	<a href="#home" aria-controls="home" role="tab" data-toggle="tab" id="tab1">수가리스트</a>
									  </li>
									  <li role="presentation">
									  	<a href="#profile" aria-controls="profile" role="tab" data-toggle="tab" id="tab2">수가한도액</a>
									  </li>
									</ul>
									<!-- Tab panes -->
									  <div class="tab-content">
									    <div role="tabpanel" class="tab-pane active" id="home">
											<!-- <header>
												<div class="icons">
													<i class="fa fa-table"></i>
												</div>
												<h5>수가 리스트</h5>
											</header> -->
											<div class="col-sm-11" >
												<table>
													<tbody>
													    <tr>
													    	<td>년도 : </td>
													        <td>
													        	<select id="year" name="year">
																	<option value="">=년도=</option>
																	<option value="2018">2018</option>
																	<option value="2019">2019</option>
																	<option value="2020">2020</option>
																</select>
													        </td>
													   	</tr>
													</tbody>
														<table id="dataTable" class="table table-bordered table-hover" style="font-size: 25px">
																<thead>
																	<tr role="row">
																		<th>서비스종류</th>
																		<th>시간/종류</th>
																		<th>년도</th>
																		<th>수가</th>
																		<th>본인부담금</th>
																		<th>비고</th>
																	</tr>
																</thead>
																<tbody>
																	<tr th:each="b : ${benefitcost}" role="row" class="odd">
																		<td th:text="${b.serviceCategory}" class="sorting_1"></td>
																	    <td th:text="${b.serviceTimeAndType}" style="text-align: right"></td>
																	    <td th:text="${b.benefitCostYear}" style="text-align: right"></td>
																	    <td th:text="${b.benefitCost}" class="price" style="text-align: right"></td>
																	    <td th:text="${b.nonBenefitCost}" class="price" style="text-align: right"></td>
																	    <td></td>
																	</tr>
															</tbody>
														</table>
													</table>
												</div>
										<!-- 테이블 End -->
									    </div>
									    <div role="tabpanel" class="tab-pane" id="profile">
										    <div class="col-sm-11">
													<table>
														<tbody>
														    <tr>
														    	<td>년도 : </td>
														        <td>
														        	<select id="year1" name="year">
																		<option value="">=년도=</option>
																		<option value="2018">2018</option>
																		<option value="2019">2019</option>
																		<option value="2020">2020</option>
																	</select>
														        </td>
														   	</tr>
														</tbody>
															<table id="dataTable1" class="table table-bordered table-hover" style="font-size: 25px">
																<thead>
																	<tr role="row">
																		<th>등급</th>
																		<th>년도</th>
																		<th>수가한도액</th>
																		<th>비고</th>
																	</tr>
																</thead>
																<tbody>
																	<tr th:each="bm : ${benefitMax}" role="row" class="odd" style="text-align: right">
																		<td th:text="${bm.serviceLevel}" ></td>
																	    <td th:text="${bm.benefitMaxYear}"></td>
																	    <td th:text="${bm.benefitMaxCost}" class="price"></td>
																	    <td></td>
																	</tr>
																</tbody>
															</table>
														</table>
													</div>
											<!-- 테이블 End -->
									    </div>
									  </div>
									</div>
								</div>
							</div>
						</div>				
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
</body>
</th:block>
<th:block layout:fragment="customPlugin">

            <!-- jQuery 기본 js파일 -->
            <script src="/assets/lib/jquery/jquery.js"></script>

            <!--Bootstrap -->
            <script src="/assets/lib/bootstrap/js/bootstrap.js"></script>
            <!-- MetisMenu -->
            <script src="/assets/lib/metismenu/metisMenu.js"></script>
            <!-- onoffcanvas -->
            <script src="/assets/lib/onoffcanvas/onoffcanvas.js"></script>
            <!-- Screenfull -->
            <script src="/assets/lib/screenfull/screenfull.js"></script>
            <!-- Metis core scripts -->
            <script src="/assets/js/core.js"></script>
            <!-- Metis demo scripts -->
            <script src="/assets/js/app.js"></script>
            <script src="/assets/js/style-switcher.js"></script>
            
            <!-- 테이블 js -->
		   	<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.0/jquery-ui.min.js"></script>
		    <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.12/js/jquery.dataTables.min.js"></script>
		    <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.12/js/dataTables.bootstrap.min.js"></script>
		    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.26.6/js/jquery.tablesorter.min.js"></script>
		    <script src="//cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
    <script>
    
    //숫자에 콤마넣기.
    function numberFormat(str) {
  	   return str.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
  	}
    var price = $('.price');
    for(var i=0;i<price.length;i++){
    	var str = price.eq(i).text();
    	price.eq(i).text(numberFormat(str))
    }
    
    //셀렉트 박스로 년도별 수가 검색
   	  $.fn.dataTable.ext.search.push(
   			    function( settings, data, dataIndex ) {
   			        var choosYear = parseInt( $('#year').val(), 10 );
   			        var year = parseFloat( data[2] ) || 0; // use data for the age column
   			 
   			        if ( isNaN( choosYear )  || ( choosYear == year ) )
   			        {
   			            return true;
   			        }
   			        return false;
   			    }
   			    
   			);
    //셀렉박스로 년도별 검색
 	  $.fn.dataTable.ext.search.push(
 			 function( settings, data, dataIndex ) {
			      var choosYear1 = parseInt( $('#year1').val(), 10 );
				        var year1 = parseFloat( data[1] ) || 0; // use data for the age column
				 
				        if ( isNaN( choosYear1 )  || ( choosYear1 == year1 ) )
				        {
				            return true;
				        }
				        return false;
		    }
 	  );
   	  
    //테이블 기본 설정
      $(function() {
    	  var table = $('#dataTable').DataTable({
			"paging" : false,
			
			"language": 
			   {
			   "sInfo": " 총_TOTAL_건의 자료 중  _START_번부터~_END_번까지 ",
			   "lengthMenu": "_MENU_ 개씩 보기",
			   "search":         "검색:",
			   "paginate": {
			   "first":      "First",
			   "last":       "Last",
			   "next":       "다음",
			   "previous":   "이전"
			        }
			}
         });
    	  var table1 = $('#dataTable1').DataTable({
   			"paging" : false,
			"language": 
				
			   {
			   "sInfo": " 총_TOTAL_건의 자료 중  _START_번부터~_END_번까지 ",
			   "lengthMenu": "_MENU_ 개씩 보기",
			   "search":         "검색:",
			   "paginate": {
			   "first":      "First",
			   "last":       "Last",
			   "next":       "다음",
			   "previous":   "이전"
			   
			        }
			}
         });
    	  //테이블 정렬 
        table.order([2,'asc']).draw();
        table1.order([1,'asc']).draw();
        
        //연도별 검색
    	  $('#year').change( function() {
    	        table.draw();
    	    } );
    	  $('#year1').change( function() {
  	        	table1.draw();
  	    } );
    	  $('#tab1').click(function(){
    		  $("#year option:eq(0)").prop("selected", true);
    	  });
    	  $('#tab2').click(function(){
    		  $("#year1 option:eq(0)").prop("selected", true);
    	  });
    	  
      });
   </script>
</th:block>
</html>