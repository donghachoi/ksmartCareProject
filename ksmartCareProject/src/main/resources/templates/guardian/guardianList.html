<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default}">

<th:block layout:fragment="customTitle">
	<title>index</title>
<!-- Bootstrap -->
       <link rel="stylesheet" href="/assets/lib/bootstrap/css/bootstrap.css">
       
       <!-- Font Awesome -->
       <link rel="stylesheet" href="/assets/lib/font-awesome/css/font-awesome.css">
       
       <!-- Metis core stylesheet -->
       <link rel="stylesheet" href="/assets/css/main.css">
       
       <!-- metisMenu stylesheet -->
       <link rel="stylesheet" href="/assets/lib/metismenu/metisMenu.css">
       
       <!-- onoffcanvas stylesheet -->
       <link rel="stylesheet" href="/assets/lib/onoffcanvas/onoffcanvas.css">
       
       <!-- animate.css stylesheet -->
       <link rel="stylesheet" href="/assets/lib/animate.css/animate.css">
      
       <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.12/css/dataTables.bootstrap.min.css">

       <script>
           less = {
               env: "development",
               relativeUrls: false,
               rootpath: "/assets/"
           };
       </script>
       <link rel="stylesheet" href="/assets/css/style-switcher.css">
       <link rel="stylesheet/less" type="text/css" href="/assets/less/theme.less">
       <script src="https://cdnjs.cloudflare.com/ajax/libs/less.js/2.7.1/less.js"></script>
</th:block>
<th:block layout:fragment="customContents">
	<body class="  ">
		<div class="bg-dark dk" id="wrap">
			<div id="top">
				<header class="head">
					<div class="main-bar">
						<h3><i class="fa fa-table"></i>&nbsp;보호자 리스트 </h3>
					</div>
                 	<!-- /.main-bar -->
            	</header>
            	<!-- /.head -->
			</div>
   			 <!-- /#top -->
		</div>
		<!-- /#wrap -->
		<div id="content">
	<div class="outer">

	<div class="inner bg-light lter">
		<!-- 보호자리스트 개략 테이블 Start -->
		
		<div class="box">
			<div class="col-lg-12 ui-sortable">
					<div class="box ui-sortable-handle"
						style="position: relative; left: 0px; right: 0px; top: 0px;">
						<header>
							<div class="icons">
								<i class="fa fa-table"></i>
							</div>
							<h5>보호자 리스트</h5>
						</header>
						
						<div id="collapse4" class="body">
							<div class="row">
								<div class="col-sm-12">
									<table id="dataTable" class="table table-bordered table-hover" style="font-size: 10px">
										<thead>
											<tr role="row">
												<th>번호</th>
												<th>보호자코드</th>
												<th>수급자코드</th>
												<th>수급자이름</th>
												<th>보호자이름</th>
												<th>연락처</th>
												<th style="display: none">보호자비번</th>
												<th style="display: none">성별</th>
												<th style="display: none">주민번호</th>
												<th style="display: none">등록일</th>
												<th style="display: none">수급자와의 관계</th>
												<th style="display: none">주소(거주지)</th>
												<th style="display: none">주소(우편물)</th>
												<th style="display: none">수급자 동거여부</th>
											</tr>
										</thead>
										<tbody>
											<tr role="row" class="odd" th:each="B:${guardianList}">
												<td class="sorting_1" th:text="${B.guardianListNumber}" th:guardianListNumber="${B.guardianListNumber}"></td>
											    <td th:text="${B.guardianId}" th:guardianId="${B.guardianId}"></td>
											    <td th:text="${B.elderId}" th:elderId="${B.elderId}"></td>
											    <td th:text="${B.elderName}" th:elderName="${B.elderName}"></td>
											    <td th:text="${B.guardianName}" th:guardianName="${B.guardianName}"></td>
											    <td th:text="${B.guardianPhone}" th:guardianPhone="${B.guardianPhone}"></td>
											    <td th:text="${B.guardianPw}" th:guardianPw="${B.guardianPw}" style="display: none"></td>  
											    <td th:text="${B.guardianGender}" th:guardianGender="${B.guardianGender}" style="display: none"></td>  
											    <td th:text="${B.guardianPersonalNumber}" th:guardianPersonalNumber="${B.guardianPersonalNumber}" style="display: none"></td>
											    <th th:text="${B.guardianRegistrationDate}" th:guardianRegistrationDate="${B.guardianRegistrationDate}" style="display: none"></th>
											    <th th:text="${B.guardianRelation}" th:guardianRelation="${B.guardianRelation}" style="display: none"></th>
											    <th th:text="${B.guardianAdressForStay}" th:guardianAdressForStay="${B.guardianAdressForStay}" style="display: none"></th>
											    <th th:text="${B.guardianAdressForPost}" th:guardianAdressForPost="${B.guardianAdressForPost}" style="display: none"></th>
											    <th th:text="${B.guardianCohabitation}" th:guardianCohabitation="${B.guardianCohabitation}" style="display: none"></th>
											</tr>
										
											
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>				
			</div>
			
				<!-- 보호자 개략 테이블 End -->
				<!-- 보호자 상세정보 테이블 Start -->
								<div class="col-lg-12 ui-sortable">
									<div class="box ui-sortable-handle">
										<header>
											<div class="icons">
												<i class="fa fa-table"></i>
											</div>
											<h5>보호자 상세 정보</h5>
											<div class="toolbar">
											
												<div class="btn-group">
											
													<button type="button" class="btn btn-default btn-sm btn-line"
															id="btnGuardianIdForUpdate">
														<span class="ui-button-text">
														정보수정
														</span>
													</button>
													<button type="button" class="btn btn-default btn-sm btn-line"
															id="btnGuardianIdForDelete">
															<span class="ui-button-text">
															보호자삭제
															</span>
													</button>
													<!-- <a href="#defaultTable" data-toggle="collapse"
														class="btn btn-sm btn-default minimize-box"> 
														<i class="fa fa-angle-up"></i>
													</a> -->
												</div>
											</div>
										</header>
										<div id="defaultTable" class="body collapse in">
										
											<table class="table responsive-table" >
												<tbody>
													<tr>
														<th rowspan="2"><img src="/assets/img/test_peng.png"></th>
														
														<th>보호자코드</th>
														<td id="guardianId"></td>
														<th>수급자코드</th>
														<td id="elderId"></td>
														<th>수급자이름</th>
														<td id="elderName"></td>
													</tr>
													<tr>
														<th>보호자이름</th>
														<td id="guardianName"></td>
														<th>보호자비번</th>
														<td id="guardianPw"></td>
														<th>성별</th>
														<td id="guardianGender"></td>
													</tr>
													<tr>
														<th>주민등록번호</th>
														<td id="guardianPersonalNumber"></td>
														<th>연락처</th>
														<td id="guardianPhone"></td>
														<th>등록일</th>
														<td id="guardianRegistrationDate"></td>
														<th>수급자와의 관계</th>
														<td id="guardianRelation"></td>
													</tr>
													<tr>
														<th>주소(거주지)</th>
														<td id="guardianAdressForStay"></td>
														<th>주소(우편물)</th>
														<td id="guardianAdressForPost"></td>
														<th>수급자 동거여부</th>
														<td id="guardianCohabitation"></td>
														<th></th>
														<td></td>	
													</tr>
													<tr>
														<th>비고</th>
														<td colspan="4"></td>
													</tr>
												</tbody>
											</table>								
										</div>
									</div>
								</div>
								
								<!-- 보호자 상세정보 End-->
							</div>
						
					</div>
				</div>
				
				
		</div>
	</body>
</th:block>
<th:block layout:fragment="customPlugin">

            <!-- jQuery 기본 js파일 -->
            <script src="/assets/lib/jquery/jquery.js"></script>

            <!--Bootstrap -->
            <script src="/assets/lib/bootstrap/js/bootstrap.js"></script>
            <!-- MetisMenu -->
            <script src="/assets/lib/metismenu/metisMenu.js"></script>
            <!-- onoffcanvas -->
            <script src="/assets/lib/onoffcanvas/onoffcanvas.js"></script>
            <!-- Screenfull -->
            <script src="/assets/lib/screenfull/screenfull.js"></script>
            <!-- Metis core scripts -->
            <script src="/assets/js/core.js"></script>
            <!-- Metis demo scripts -->
            <script src="/assets/js/app.js"></script>
            <script src="/assets/js/style-switcher.js"></script>
            
            <!-- 테이블 js -->
		   	<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.0/jquery-ui.min.js"></script>
		    <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.12/js/jquery.dataTables.min.js"></script>
		    <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.12/js/dataTables.bootstrap.min.js"></script>
		    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.26.6/js/jquery.tablesorter.min.js"></script>
		    <script src="//cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
		    <script>
		      $(function() {
		         $('#dataTable').DataTable({
		            "language": 
		               {
		               "sInfo": " 총_TOTAL_건의 자료 중  _START_번부터~_END_번까지 ",
		               "lengthMenu": "_MENU_ 개씩 보기",
		               "search":         "검색:",
		               "paginate": {
		               "first":      "First",
		               "last":       "Last",
		               "next":       "다음",
		               "previous":   "이전"
		                    }
		            }           
		         });
		      });
   			</script>
   			<script>
			$("#dataTable tr").click(function() {
		
				  var str = ""
				
				  // 현재 클릭된 Row(<tr>)		
				  var guardianId = $(this).find('[guardianId]').attr('guardianId');
				  var elderId = $(this).find('[elderId]').attr('elderId');
				  var elderName = $(this).find('[elderName]').attr('elderName');
				  var guardianPw = $(this).find('[guardianPw]').attr('guardianPw');
				  var guardianName = $(this).find('[guardianName]').attr('guardianName');
				  var guardianGender = $(this).find('[guardianGender]').attr('guardianGender');
				  var guardianPersonalNumber = $(this).find('[guardianPersonalNumber]').attr('guardianPersonalNumber');
				  var guardianPhone = $(this).find('[guardianPhone]').attr('guardianPhone');
				  var guardianRelation = $(this).find('[guardianRelation]').attr('guardianRelation');
				  var guardianRegistrationDate = $(this).find('[guardianRegistrationDate]').attr('guardianRegistrationDate');
				  var guardianAdressForStay = $(this).find('[guardianAdressForStay]').attr('guardianAdressForStay');
				  var guardianAdressForPost = $(this).find('[guardianAdressForPost]').attr('guardianAdressForPost');
				  var guardianCohabitation = $(this).find('[guardianCohabitation]').attr('guardianCohabitation');
				
				  
				  $('#guardianId').text(guardianId);
				  $('#elderId').text(elderId);
				  $('#elderName').text(elderName);
				  $('#guardianPw').text(guardianPw);
				  $('#guardianName').text(guardianName);
				  $('#guardianGender').text(guardianGender);
				  $('#guardianPersonalNumber').text(guardianPersonalNumber);
				  $('#guardianPhone').text(guardianPhone);
				  $('#guardianRelation').text(guardianRelation);
				  $('#guardianRegistrationDate').text(guardianRegistrationDate);
				  $('#guardianAdressForStay').text(guardianAdressForStay);
				  $('#guardianAdressForPost').text(guardianAdressForPost);
				  $('#guardianCohabitation').text(guardianCohabitation); 
				
				 $('#btnGuardianIdForUpdate').attr('guardianId', guardianId);
				 $('#btnGuardianIdForDelete').attr('guardianId', guardianId);
				 $('#btnGuardianIdForDelete').attr('guardianName', guardianName);	
				});
			
				$('#btnGuardianIdForUpdate').click(function(){
					var guardianId = $(this).attr('guardianId');
					if(guardianId == undefined){
						//수정할 보호자가 선택되지 않은 경우 알림창
						alert('보호자를 선택해주세요');
					}else{	
						//선택한 보호자의 수정페이지로 이동
						location.href="/center/guardianUpdate?guardianId="+guardianId;
							
					}
				});
				
				$('#btnGuardianIdForDelete').click(function(){
					var guardianId = $(this).attr('guardianId');
					var guardianName = $(this).attr('guardianName');
					if(guardianId == undefined){
						//삭제할 보호자가 선택되지 않은 경우 알림창
						alert('보호자를 선택해주세요');
					}else{				
						 //삭제 확인창	
						 var confirmresult = confirm('!!!!확인요청!!!!\n\n보호자아이디:'+guardianId+'\n보호자명:'+guardianName+'\n\n을(를)정말 삭제하시겠습니까?\n\n삭제 후에는 되돌릴 수 없습니다');
						 if(confirmresult){
							//삭제 확인버튼
							location.href="/center/guardianDelete?guardianId="+guardianId;
						}else{
							//삭제 취소버튼
							return;
						}	 	 
					 
					 
						
					}
					
				});
				
				
			</script>
   
   
</th:block>
</html>